<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="855px" preserveAspectRatio="none" style="width:1614px;height:855px;" version="1.1" viewBox="0 0 1614 855" width="1614px" zoomAndPan="magnify"><defs><filter height="300%" id="fxjboah928mee" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="551" x="529.25" y="31.2419">Evolution sequence - Grammatical Evolution runs for Torque DSL</text><rect fill="#FFFFFF" filter="url(#fxjboah928mee)" height="231.3541" style="stroke:#000000;stroke-width:2.0;" width="1289" x="226.5" y="403.9379"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="23" x2="23" y1="129.5838" y2="768.8221"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="173.5" x2="173.5" y1="129.5838" y2="768.8221"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="294.5" x2="294.5" y1="129.5838" y2="768.8221"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="581.5" x2="581.5" y1="129.5838" y2="768.8221"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="750.5" x2="750.5" y1="129.5838" y2="768.8221"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="909.5" x2="909.5" y1="129.5838" y2="768.8221"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1046.5" x2="1046.5" y1="129.5838" y2="768.8221"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1248.5" x2="1248.5" y1="129.5838" y2="768.8221"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1456.5" x2="1456.5" y1="129.5838" y2="768.8221"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1559.5" x2="1559.5" y1="129.5838" y2="768.8221"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="125.4818">User</text><ellipse cx="23.5" cy="53.5158" fill="#FEFECE" filter="url(#fxjboah928mee)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M23.5,61.5158 L23.5,88.5158 M10.5,69.5158 L36.5,69.5158 M23.5,88.5158 L10.5,103.5158 M23.5,88.5158 L36.5,103.5158 " fill="none" filter="url(#fxjboah928mee)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="782.7881">User</text><ellipse cx="23.5" cy="796.8901" fill="#FEFECE" filter="url(#fxjboah928mee)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M23.5,804.8901 L23.5,831.8901 M10.5,812.8901 L36.5,812.8901 M23.5,831.8901 L10.5,846.8901 M23.5,831.8901 L36.5,846.8901 " fill="none" filter="url(#fxjboah928mee)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#fxjboah928mee)" height="52.1358" style="stroke:#A80036;stroke-width:1.5;" width="102" x="120.5" y="72.4479"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="144" y="94.4139">Browser</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="127.5" y="113.4818">(Streamlit UI)</text><rect fill="#FEFECE" filter="url(#fxjboah928mee)" height="52.1358" style="stroke:#A80036;stroke-width:1.5;" width="102" x="120.5" y="767.8221"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="144" y="789.7881">Browser</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="127.5" y="808.856">(Streamlit UI)</text><rect fill="#FEFECE" filter="url(#fxjboah928mee)" height="52.1358" style="stroke:#A80036;stroke-width:1.5;" width="113" x="236.5" y="72.4479"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="243.5" y="94.4139">Evolution Page</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="245" y="113.4818">3_evolution.py</text><rect fill="#FEFECE" filter="url(#fxjboah928mee)" height="52.1358" style="stroke:#A80036;stroke-width:1.5;" width="113" x="236.5" y="767.8221"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="243.5" y="789.7881">Evolution Page</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="245" y="808.856">3_evolution.py</text><rect fill="#FEFECE" filter="url(#fxjboah928mee)" height="52.1358" style="stroke:#A80036;stroke-width:1.5;" width="133" x="513.5" y="72.4479"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="529.5" y="94.4139">Dataset Loader</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="520.5" y="113.4818">dataset_loader.py</text><rect fill="#FEFECE" filter="url(#fxjboah928mee)" height="52.1358" style="stroke:#A80036;stroke-width:1.5;" width="133" x="513.5" y="767.8221"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="529.5" y="789.7881">Dataset Loader</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="520.5" y="808.856">dataset_loader.py</text><rect fill="#FEFECE" filter="url(#fxjboah928mee)" height="52.1358" style="stroke:#A80036;stroke-width:1.5;" width="176" x="660.5" y="72.4479"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="697" y="94.4139">Grammar (BNF)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="667.5" y="113.4818">ensamble_grammar.bnf</text><rect fill="#FEFECE" filter="url(#fxjboah928mee)" height="52.1358" style="stroke:#A80036;stroke-width:1.5;" width="176" x="660.5" y="767.8221"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="697" y="789.7881">Grammar (BNF)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="667.5" y="808.856">ensamble_grammar.bnf</text><rect fill="#FEFECE" filter="url(#fxjboah928mee)" height="52.1358" style="stroke:#A80036;stroke-width:1.5;" width="115" x="850.5" y="72.4479"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="865" y="94.4139">GE Grammar</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="857.5" y="113.4818">Grammar class</text><rect fill="#FEFECE" filter="url(#fxjboah928mee)" height="52.1358" style="stroke:#A80036;stroke-width:1.5;" width="115" x="850.5" y="767.8221"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="865" y="789.7881">GE Grammar</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="857.5" y="808.856">Grammar class</text><rect fill="#FEFECE" filter="url(#fxjboah928mee)" height="52.1358" style="stroke:#A80036;stroke-width:1.5;" width="131" x="979.5" y="72.4479"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="997" y="94.4139">GE Algorithms</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="986.5" y="113.4818">grape.algorithms</text><rect fill="#FEFECE" filter="url(#fxjboah928mee)" height="52.1358" style="stroke:#A80036;stroke-width:1.5;" width="131" x="979.5" y="767.8221"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="997" y="789.7881">GE Algorithms</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="986.5" y="808.856">grape.algorithms</text><rect fill="#FEFECE" filter="url(#fxjboah928mee)" height="52.1358" style="stroke:#A80036;stroke-width:1.5;" width="141" x="1176.5" y="72.4479"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="1196.5" y="94.4139">TorqueMapper</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="1183.5" y="113.4818">Torque_mapper.py</text><rect fill="#FEFECE" filter="url(#fxjboah928mee)" height="52.1358" style="stroke:#A80036;stroke-width:1.5;" width="141" x="1176.5" y="767.8221"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="1196.5" y="789.7881">TorqueMapper</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="1183.5" y="808.856">Torque_mapper.py</text><rect fill="#FEFECE" filter="url(#fxjboah928mee)" height="52.1358" style="stroke:#A80036;stroke-width:1.5;" width="93" x="1408.5" y="72.4479"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="1424.5" y="94.4139">Compiler</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="1415.5" y="113.4818">compiler.py</text><rect fill="#FEFECE" filter="url(#fxjboah928mee)" height="52.1358" style="stroke:#A80036;stroke-width:1.5;" width="93" x="1408.5" y="767.8221"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="1424.5" y="789.7881">Compiler</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="1415.5" y="808.856">compiler.py</text><rect fill="#FEFECE" filter="url(#fxjboah928mee)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="85" x="1515.5" y="91.5158"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="1522.5" y="113.4818">FileSystem</text><rect fill="#FEFECE" filter="url(#fxjboah928mee)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="85" x="1515.5" y="767.8221"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="1522.5" y="789.7881">FileSystem</text><polygon fill="#A80036" points="161.5,159.2898,171.5,163.2898,161.5,167.2898,165.5,163.2898" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="23.5" x2="167.5" y1="163.2898" y2="163.2898"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="30.5" y="157.4808">Open Evolution page</text><polygon fill="#A80036" points="283,190.9958,293,194.9958,283,198.9958,287,194.9958" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="173.5" x2="289" y1="194.9958" y2="194.9958"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48" x="180.5" y="189.1868">render()</text><polygon fill="#A80036" points="570,240.4078,580,244.4078,570,248.4078,574,244.4078" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="295" x2="576" y1="244.4078" y2="244.4078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="263" x="302" y="220.8928">load_dataset_from_config(evolution_config)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="302" y="238.5988">(if X, y not in session state)</text><polygon fill="#A80036" points="306,272.1138,296,276.1138,306,280.1138,302,276.1138" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="300" x2="581" y1="276.1138" y2="276.1138"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="312" y="270.3048">X, y, data_info</text><polygon fill="#A80036" points="283,321.5259,293,325.5259,283,329.5259,287,325.5259" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="23.5" x2="289" y1="325.5259" y2="325.5259"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="30.5" y="302.0109">Set GA/GE parameters</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158" x="30.5" y="319.7169">and click \"Run evolution\"</text><polygon fill="#A80036" points="898,353.2319,908,357.2319,898,361.2319,902,357.2319" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="295" x2="904" y1="357.2319" y2="357.2319"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="302" y="351.4229">Grammar(GRAMMAR_PATH)</text><polygon fill="#A80036" points="761.5,384.9379,751.5,388.9379,761.5,392.9379,757.5,388.9379" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="755.5" x2="909" y1="388.9379" y2="388.9379"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="767.5" y="383.1289">read BNF</text><path d="M226.5,403.9379 L299.5,403.9379 L299.5,412.9379 L289.5,422.9379 L226.5,422.9379 L226.5,403.9379 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="231.3541" style="stroke:#000000;stroke-width:2.0;" width="1289" x="226.5" y="403.9379"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="241.5" y="418.8349">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="76" x="314.5" y="417.6968">[for each run]</text><polygon fill="#A80036" points="1035,461.056,1045,465.056,1035,469.056,1039,465.056" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="295" x2="1041" y1="465.056" y2="465.056"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193" x="302" y="441.5409">ge_eaSimpleWithElitism_torque(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="248" x="308" y="459.247">population, toolbox, params, grammar,...)</text><polygon fill="#A80036" points="1237,528.174,1247,532.174,1237,536.174,1241,532.174" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1047" x2="1243" y1="532.174" y2="532.174"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="1054" y="490.953">normalise_torque_phenotype</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="1054" y="508.659">+ Torque DSL mapping</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="1054" y="526.365">(per individual)</text><polygon fill="#A80036" points="1445,559.88,1455,563.88,1445,567.88,1449,563.88" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1249" x2="1451" y1="563.88" y2="563.88"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="1256" y="558.071">compile_ast_to_estimator(AST)</text><polygon fill="#A80036" points="1058,591.586,1048,595.586,1058,599.586,1054,595.586" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1052" x2="1456" y1="595.586" y2="595.586"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="1064" y="589.777">sklearn estimator</text><polygon fill="#A80036" points="306,623.2921,296,627.2921,306,631.2921,302,627.2921" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="300" x2="1046" y1="627.2921" y2="627.2921"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="312" y="621.4831">logbook, halloffame</text><polygon fill="#A80036" points="34.5,679.7041,24.5,683.7041,34.5,687.7041,30.5,683.7041" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="28.5" x2="294" y1="683.7041" y2="683.7041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="40.5" y="660.1891">Show per-run tables,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="40.5" y="677.8951">chart and best individual</text><polygon fill="#A80036" points="1548,746.8221,1558,750.8221,1548,754.8221,1552,750.8221" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="295" x2="1554" y1="750.8221" y2="750.8221"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="302" y="709.6011">write results/</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="302" y="727.3071">config.json, generations.csv,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="223" x="302" y="745.0131">averaged_across_runs.csv, chart.html</text><!--MD5=[f0ebe815c0c2e27bdda564a7a5d7c50f]
@startuml
title Evolution sequence - Grammatical Evolution runs for Torque DSL

actor User
participant "Browser\n(Streamlit UI)" as Browser
participant "Evolution Page\n3_evolution.py" as EvoUI
participant "Dataset Loader\ndataset_loader.py" as Loader
participant "Grammar (BNF)\nensamble_grammar.bnf" as GrammarFile
participant "GE Grammar\nGrammar class" as BNFGrammar
participant "GE Algorithms\ngrape.algorithms" as GE
participant "TorqueMapper\nTorque_mapper.py" as TM
participant "Compiler\ncompiler.py" as Compiler

User -> Browser: Open Evolution page
Browser -> EvoUI: render()

EvoUI -> Loader: load_dataset_from_config(evolution_config)\n(if X, y not in session state)
Loader - -> EvoUI: X, y, data_info

User -> EvoUI: Set GA/GE parameters\nand click \"Run evolution\"
EvoUI -> BNFGrammar: Grammar(GRAMMAR_PATH)
BNFGrammar - -> GrammarFile: read BNF

loop for each run
  EvoUI -> GE: ge_eaSimpleWithElitism_torque(\n  population, toolbox, params, grammar,...)
  GE -> TM: normalise_torque_phenotype\n+ Torque DSL mapping\n(per individual)
  TM -> Compiler: compile_ast_to_estimator(AST)
  Compiler - -> GE: sklearn estimator
  GE - -> EvoUI: logbook, halloffame
end

EvoUI - -> User: Show per-run tables,\nchart and best individual
EvoUI -> FileSystem: write results/\nconfig.json, generations.csv,\naveraged_across_runs.csv, chart.html

@enduml

PlantUML version 1.2021.00(Sun Jan 10 10:25:05 GMT 2021)
(MIT source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>