<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="691px" preserveAspectRatio="none" style="width:732px;height:691px;" version="1.1" viewBox="0 0 732 691" width="732px" zoomAndPan="magnify"><defs><filter height="300%" id="f1829vpzzwcgea" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="503" x="116.75" y="31.2419">Mapper sequence - User maps Torque DSL to AST &amp; Python</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="23" x2="23" y1="129.5838" y2="600.88"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="163.5" x2="163.5" y1="129.5838" y2="600.88"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="280.5" x2="280.5" y1="129.5838" y2="600.88"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="466" x2="466" y1="129.5838" y2="600.88"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="647.5" x2="647.5" y1="129.5838" y2="600.88"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="125.4818">User</text><ellipse cx="23.5" cy="53.5158" fill="#FEFECE" filter="url(#f1829vpzzwcgea)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M23.5,61.5158 L23.5,88.5158 M10.5,69.5158 L36.5,69.5158 M23.5,88.5158 L10.5,103.5158 M23.5,88.5158 L36.5,103.5158 " fill="none" filter="url(#f1829vpzzwcgea)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="614.846">User</text><ellipse cx="23.5" cy="628.9479" fill="#FEFECE" filter="url(#f1829vpzzwcgea)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M23.5,636.9479 L23.5,663.9479 M10.5,644.9479 L36.5,644.9479 M23.5,663.9479 L10.5,678.9479 M23.5,663.9479 L36.5,678.9479 " fill="none" filter="url(#f1829vpzzwcgea)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f1829vpzzwcgea)" height="52.1358" style="stroke:#A80036;stroke-width:1.5;" width="102" x="110.5" y="72.4479"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="134" y="94.4139">Browser</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="117.5" y="113.4818">(Streamlit UI)</text><rect fill="#FEFECE" filter="url(#f1829vpzzwcgea)" height="52.1358" style="stroke:#A80036;stroke-width:1.5;" width="102" x="110.5" y="599.88"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="134" y="621.846">Browser</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="117.5" y="640.9139">(Streamlit UI)</text><rect fill="#FEFECE" filter="url(#f1829vpzzwcgea)" height="52.1358" style="stroke:#A80036;stroke-width:1.5;" width="104" x="226.5" y="72.4479"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="233.5" y="94.4139">Mapper Page</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="235" y="113.4818">0_mapper.py</text><rect fill="#FEFECE" filter="url(#f1829vpzzwcgea)" height="52.1358" style="stroke:#A80036;stroke-width:1.5;" width="104" x="226.5" y="599.88"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="233.5" y="621.846">Mapper Page</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="235" y="640.9139">0_mapper.py</text><rect fill="#FEFECE" filter="url(#f1829vpzzwcgea)" height="52.1358" style="stroke:#A80036;stroke-width:1.5;" width="141" x="394" y="72.4479"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="414" y="94.4139">TorqueMapper</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="401" y="113.4818">Torque_mapper.py</text><rect fill="#FEFECE" filter="url(#f1829vpzzwcgea)" height="52.1358" style="stroke:#A80036;stroke-width:1.5;" width="141" x="394" y="599.88"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="414" y="621.846">TorqueMapper</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="401" y="640.9139">Torque_mapper.py</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="597" y="106.4139">Grammar BNF</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="563.5" y="125.4818">ensamble_grammar.bnf</text><path d="M629.5,55.4479 C629.5,45.4479 647.5,45.4479 647.5,45.4479 C647.5,45.4479 665.5,45.4479 665.5,55.4479 L665.5,81.4479 C665.5,91.4479 647.5,91.4479 647.5,91.4479 C647.5,91.4479 629.5,91.4479 629.5,81.4479 L629.5,55.4479 " fill="#FEFECE" filter="url(#f1829vpzzwcgea)" style="stroke:#000000;stroke-width:1.5;"/><path d="M629.5,55.4479 C629.5,65.4479 647.5,65.4479 647.5,65.4479 C647.5,65.4479 665.5,65.4479 665.5,55.4479 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="597" y="614.846">Grammar BNF</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="563.5" y="633.9139">ensamble_grammar.bnf</text><path d="M629.5,648.0159 C629.5,638.0159 647.5,638.0159 647.5,638.0159 C647.5,638.0159 665.5,638.0159 665.5,648.0159 L665.5,674.0159 C665.5,684.0159 647.5,684.0159 647.5,684.0159 C647.5,684.0159 629.5,684.0159 629.5,674.0159 L629.5,648.0159 " fill="#FEFECE" filter="url(#f1829vpzzwcgea)" style="stroke:#000000;stroke-width:1.5;"/><path d="M629.5,648.0159 C629.5,658.0159 647.5,658.0159 647.5,658.0159 C647.5,658.0159 665.5,658.0159 665.5,648.0159 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><polygon fill="#A80036" points="151.5,159.2898,161.5,163.2898,151.5,167.2898,155.5,163.2898" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="23.5" x2="157.5" y1="163.2898" y2="163.2898"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="30.5" y="157.4808">Open Mapper page</text><polygon fill="#A80036" points="268.5,190.9958,278.5,194.9958,268.5,198.9958,272.5,194.9958" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="163.5" x2="274.5" y1="194.9958" y2="194.9958"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48" x="170.5" y="189.1868">render()</text><polygon fill="#A80036" points="268.5,240.4078,278.5,244.4078,268.5,248.4078,272.5,244.4078" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="23.5" x2="274.5" y1="244.4078" y2="244.4078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="30.5" y="220.8928">Enter Torque DSL</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="30.5" y="238.5988">and click \"Map to AST &amp; Python\"</text><polygon fill="#A80036" points="454.5,272.1138,464.5,276.1138,454.5,280.1138,458.5,276.1138" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="280.5" x2="460.5" y1="276.1138" y2="276.1138"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="287.5" y="270.3048">dsl_to_ast(dsl_string)</text><polygon fill="#A80036" points="635.5,303.8199,645.5,307.8199,635.5,311.8199,639.5,307.8199" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="466.5" x2="641.5" y1="307.8199" y2="307.8199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="473.5" y="302.0109">load BNF rules (on import)</text><polygon fill="#A80036" points="477.5,335.5259,467.5,339.5259,477.5,343.5259,473.5,339.5259" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="471.5" x2="646.5" y1="339.5259" y2="339.5259"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29" x="483.5" y="333.7169">rules</text><polygon fill="#A80036" points="291.5,367.2319,281.5,371.2319,291.5,375.2319,287.5,371.2319" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="285.5" x2="465.5" y1="371.2319" y2="371.2319"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47" x="297.5" y="365.4229">AST dict</text><polygon fill="#A80036" points="454.5,398.9379,464.5,402.9379,454.5,406.9379,458.5,402.9379" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="280.5" x2="460.5" y1="402.9379" y2="402.9379"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="287.5" y="397.1289">map_to_python(dsl_string)</text><polygon fill="#A80036" points="291.5,448.3499,281.5,452.3499,291.5,456.3499,287.5,452.3499" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="285.5" x2="465.5" y1="452.3499" y2="452.3499"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="297.5" y="428.8349">generated Python code</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="297.5" y="446.5409">(estimator = ...)</text><polygon fill="#A80036" points="34.5,497.762,24.5,501.762,34.5,505.762,30.5,501.762" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="28.5" x2="279.5" y1="501.762" y2="501.762"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="40.5" y="478.247">Show AST (JSON + tree)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="40.5" y="495.953">Show generated Python code</text><polygon fill="#A80036" points="268.5,529.468,278.5,533.468,268.5,537.468,272.5,533.468" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="23.5" x2="274.5" y1="533.468" y2="533.468"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="30.5" y="527.659">(optional) Save mapping JSON</text><polygon fill="#A80036" points="34.5,578.88,24.5,582.88,34.5,586.88,30.5,582.88" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="28.5" x2="279.5" y1="582.88" y2="582.88"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="40.5" y="559.365">Confirm saved</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="209" x="40.5" y="577.071">results/Torque_mapper_result.json</text><!--MD5=[8061c8644fa46a4fe89869da95be7261]
@startuml
title Mapper sequence - User maps Torque DSL to AST & Python

actor User
participant "Browser\n(Streamlit UI)" as Browser
participant "Mapper Page\n0_mapper.py" as MapperUI
participant "TorqueMapper\nTorque_mapper.py" as TM
database "Grammar BNF\nensamble_grammar.bnf" as Grammar

User -> Browser: Open Mapper page
Browser -> MapperUI: render()

User -> MapperUI: Enter Torque DSL\nand click \"Map to AST & Python\"
MapperUI -> TM: dsl_to_ast(dsl_string)
TM -> Grammar: load BNF rules (on import)
Grammar - -> TM: rules
TM - -> MapperUI: AST dict

MapperUI -> TM: map_to_python(dsl_string)
TM - -> MapperUI: generated Python code\n(estimator = ...)

MapperUI - -> User: Show AST (JSON + tree)\nShow generated Python code
User -> MapperUI: (optional) Save mapping JSON
MapperUI - -> User: Confirm saved\nresults/Torque_mapper_result.json

@enduml

PlantUML version 1.2021.00(Sun Jan 10 10:25:05 GMT 2021)
(MIT source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>